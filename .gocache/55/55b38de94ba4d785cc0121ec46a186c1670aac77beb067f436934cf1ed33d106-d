=== RUN   TestSubcommandRouting
    cmd_test.go:40: 
    cmd_test.go:40: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    cmd_test.go:40:   ğŸ”¬  SUBCOMMAND ROUTING
    cmd_test.go:40: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    cmd_test.go:86:   âœ… subcommand [category get] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [category list] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [category tree] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [category series] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [release list] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [release get] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [release dates] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [release series] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [source list] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [source get] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [source releases] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [tag search] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [tag series] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [tag related] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [search] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [meta series] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [meta category] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [meta release] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [meta source] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [meta tag] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [fetch series] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [fetch category] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [fetch query] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [series related] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [series describe] is unique in routing table
    cmd_test.go:86:   âœ… subcommand [completion] is unique in routing table
    cmd_test.go:93:   âœ… Phase 2 routing table has â‰¥25 noun/verb pairs (26 registered)
    cmd_test.go:98: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    cmd_test.go:98:   âœ…  SUBCOMMAND ROUTING: 27/27 checks passed
    cmd_test.go:98: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
--- PASS: TestSubcommandRouting (0.00s)
=== RUN   TestNewAPIEndpoints
    cmd_test.go:106: 
    cmd_test.go:106: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    cmd_test.go:106:   ğŸ”¬  NEW API ENDPOINTS
    cmd_test.go:106: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    cmd_test.go:150:   âœ… GetCategory(0): returns root category
    cmd_test.go:156:   âœ… GetCategoryChildren(0): returned 2 children
    cmd_test.go:166:   âœ… GetCategorySeries(32991): returned series [UNRATE]
    cmd_test.go:209:   âœ… ListReleases: returned 2 releases
    cmd_test.go:215:   âœ… GetRelease(10): name="Employment Situation"
    cmd_test.go:221:   âœ… GetReleaseDates(10): returned 2 dates
    cmd_test.go:227:   âœ… GetReleaseSeries(10): returned 1 series
    cmd_test.go:261:   âœ… ListSources: returned 2 sources
    cmd_test.go:267:   âœ… GetSource(1): name="Board of Governors of the Federal Reserve System (US)"
    cmd_test.go:273:   âœ… GetSourceReleases(1): returned 1 releases
    cmd_test.go:308:   âœ… SearchTags: returned 2 tags, first="inflation"
    cmd_test.go:314:   âœ… GetTagSeries: returned 1 series
    cmd_test.go:320:   âœ… GetRelatedTags: returned 1 tags
    cmd_test.go:325: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    cmd_test.go:325:   âœ…  NEW API ENDPOINTS: 13/13 checks passed
    cmd_test.go:325: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
--- PASS: TestNewAPIEndpoints (0.00s)
=== RUN   TestBatchConcurrency
    cmd_test.go:333: 
    cmd_test.go:333: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    cmd_test.go:333:   ğŸ”¬  BATCH CONCURRENCY
    cmd_test.go:333: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    cmd_test.go:409:   âœ… All 9 requests completed successfully
    cmd_test.go:414:   âœ… Peak concurrent requests (3) did not exceed limit (3)
    cmd_test.go:419:   âœ… Worker pool actually parallelised (peak=3 > 1)
    cmd_test.go:424: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    cmd_test.go:424:   âœ…  BATCH CONCURRENCY: 3/3 checks passed
    cmd_test.go:424: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
--- PASS: TestBatchConcurrency (0.06s)
=== RUN   TestPartialFailureWarnings
    cmd_test.go:432: 
    cmd_test.go:432: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    cmd_test.go:432:   ğŸ”¬  PARTIAL FAILURE / WARNINGS
    cmd_test.go:432: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    cmd_test.go:491:   âœ… Partial batch: 1 successful result returned (ID=SERIES01)
    cmd_test.go:496:   âœ… Partial batch: 2 warnings collected for failed requests (got 2)
    cmd_test.go:503:   âœ… Warnings include the failed series IDs
    cmd_test.go:508: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    cmd_test.go:508:   âœ…  PARTIAL FAILURE / WARNINGS: 3/3 checks passed
    cmd_test.go:508: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
--- PASS: TestPartialFailureWarnings (0.00s)
=== RUN   TestValueSemanticsOffline
    cmd_test.go:516: 
    cmd_test.go:516: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    cmd_test.go:516:   ğŸ”¬  VALUE SEMANTICS
    cmd_test.go:516: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    cmd_test.go:533:   âœ… JSON output preserves numeric value 4.25
    cmd_test.go:537:   âœ… JSON output does not regress to zero value
    cmd_test.go:545:   âœ… JSONL output preserves numeric value 4.25
    cmd_test.go:553:   âœ… CSV output preserves numeric value 4.25
    cmd_test.go:571:   âœ… JSONL output encodes missing values as null
    cmd_test.go:578:   âœ… CSV output encodes missing values as '.'
    cmd_test.go:612:   âœ… Store key lookup for GDP excludes GDPDEF
    cmd_test.go:617: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    cmd_test.go:617:   âœ…  VALUE SEMANTICS: 7/7 checks passed
    cmd_test.go:617: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
--- PASS: TestValueSemanticsOffline (0.04s)
=== RUN   TestFredAPIConnectivity
    core_test.go:138: â­ï¸  Skipping: API key not configured (API key not found.
        
        Set it one of these ways:
          1. CLI flag:        reserve --api-key YOUR_KEY ...
          2. Environment:     export FRED_API_KEY=YOUR_KEY
          3. config.json:     {"api_key": "YOUR_KEY"}
        
        Get a free key at https://fred.stlouisfed.org/docs/api/api_key.html)
--- SKIP: TestFredAPIConnectivity (0.00s)
=== RUN   TestPayloadIntegrity
    core_test.go:239: 
    core_test.go:239: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    core_test.go:239:   ğŸ”¬  PAYLOAD INTEGRITY
    core_test.go:239: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    core_test.go:265:   âœ… ParseObsValue("305.109") â†’ 305.1090  (numeric string 305.109 parses correctly)
    core_test.go:265:   âœ… ParseObsValue("0") â†’ 0.0000  (zero value parses correctly)
    core_test.go:265:   âœ… ParseObsValue("-1.5") â†’ -1.5000  (negative value parses correctly)
    core_test.go:259:   âœ… ParseObsValue(".") â†’ NaN  (FRED sentinel '.' parses as NaN)
    core_test.go:259:   âœ… ParseObsValue("") â†’ NaN  (empty string parses as NaN)
    core_test.go:259:   âœ… ParseObsValue("  .  ") â†’ NaN  (whitespace-padded sentinel parses as NaN)
    core_test.go:274:   âœ… FormatValue(NaN) renders as "."
    core_test.go:279:   âœ… FormatValue(NaN) renders as "." (sentinel preserved)
    core_test.go:289:   âœ… Whole number 4.0 renders as "4.0" (not "4"), got "4.0"
    core_test.go:296:   âœ… 3.4 renders as "3.4" (no trailing zeros), got "3.4"
    core_test.go:303:   âœ… 305.109 renders as "305.109", got "305.109"
    core_test.go:313:   âœ… ParseDate("2024-01-01") round-trips correctly
    core_test.go:313:   âœ… ParseDate("2000-12-31") round-trips correctly
    core_test.go:313:   âœ… ParseDate("1948-01-01") round-trips correctly
    core_test.go:323:   âœ… ParseDate("not-a-date") correctly returns an error
    core_test.go:323:   âœ… ParseDate("2024/01/01") correctly returns an error
    core_test.go:323:   âœ… ParseDate("01-01-2024") correctly returns an error
    core_test.go:323:   âœ… ParseDate("") correctly returns an error
=== RUN   TestPayloadIntegrity/config_file_loads
    core_test.go:343:   âœ… config.json values load correctly (api_key, default_format)
=== RUN   TestPayloadIntegrity/env_overrides_file
    core_test.go:361:   âœ… FRED_API_KEY env var overrides config.json api_key
=== RUN   TestPayloadIntegrity/flag_overrides_env
    core_test.go:373:   âœ… --api-key flag overrides FRED_API_KEY env var
=== NAME  TestPayloadIntegrity
    core_test.go:392:   âœ… Rate limiter allows 5 requests at 1000 req/s without blocking
    core_test.go:405:   âœ… Rate limiter respects context cancellation (blocks slow limiter)
    core_test.go:411: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    core_test.go:411:   âœ…  PAYLOAD INTEGRITY: 23/23 checks passed
    core_test.go:411: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
--- PASS: TestPayloadIntegrity (0.01s)
    --- PASS: TestPayloadIntegrity/config_file_loads (0.00s)
    --- PASS: TestPayloadIntegrity/env_overrides_file (0.00s)
    --- PASS: TestPayloadIntegrity/flag_overrides_env (0.00s)
=== RUN   TestAPIClientBehaviour
    core_test.go:419: 
    core_test.go:419: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    core_test.go:419:   ğŸ”¬  API CLIENT BEHAVIOUR
    core_test.go:419: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    core_test.go:461:   âœ… GetSeries: request succeeds without error
    core_test.go:466:   âœ… GetSeries: response ID matches request ("GDP")
    core_test.go:470:   âœ… GetSeries: title parsed correctly ("Gross Domestic Product")
    core_test.go:474:   âœ… GetSeries: popularity parsed correctly (92)
    core_test.go:496:   âœ… GetSeries: API error message propagates correctly
    core_test.go:517:   âœ… GetObservations: returned 3 observations (got 3)
    core_test.go:522:   âœ… GetObservations: first value raw string preserved ("28623.5")
    core_test.go:526:   âœ… GetObservations: FRED sentinel "." parsed as NaN (IsMissing=true)
    core_test.go:549:   âœ… GetObservations: date params forwarded correctly (start="2020-01-01" end="2024-12-31")
    core_test.go:571:   âœ… Retry: succeeded after 3 attempts (2Ã—503 then 200)
    core_test.go:596:   âœ… SearchSeries: correct params sent, 1 result returned (search_text="inflation")
    core_test.go:602: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    core_test.go:602:   âœ…  API CLIENT BEHAVIOUR: 11/11 checks passed
    core_test.go:602: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
--- PASS: TestAPIClientBehaviour (1.50s)
=== RUN   TestEmailConnectivity
    core_test.go:610: â­ï¸  Skipping: API key not configured (API key not found.
        
        Set it one of these ways:
          1. CLI flag:        reserve --api-key YOUR_KEY ...
          2. Environment:     export FRED_API_KEY=YOUR_KEY
          3. config.json:     {"api_key": "YOUR_KEY"}
        
        Get a free key at https://fred.stlouisfed.org/docs/api/api_key.html)
--- SKIP: TestEmailConnectivity (0.00s)
PASS
ok  	github.com/derickschaefer/reserve/tests	1.821s
